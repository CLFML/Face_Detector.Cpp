
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../build_environment/usage_with_windows/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.1">
    
    
      
        <title>Overview - Face Detector.Cpp</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Avenir+Next+Condensed:300,300i,400,400i,700,700i%7CAvenir+Next+Condensed:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Avenir Next Condensed";--md-code-font:"Avenir Next Condensed"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/logo.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Face Detector.Cpp" class="md-header__button md-logo" aria-label="Face Detector.Cpp" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Face Detector.Cpp
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/implementation/" class="md-tabs__link">
          
  
    
  
  Implementation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contributing/rules/" class="md-tabs__link">
          
  
    
  
  Contributing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Face Detector.Cpp" class="md-nav__button md-logo" aria-label="Face Detector.Cpp" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Face Detector.Cpp
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmake-integration" class="md-nav__link">
    <span class="md-ellipsis">
      CMake integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CMake integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#targets" class="md-nav__link">
    <span class="md-ellipsis">
      Target(s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-it-into-your-own-project" class="md-nav__link">
    <span class="md-ellipsis">
      Integrating it into your own project
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Build Environment
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Build Environment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../build_environment/usage_with_windows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Set-up build environment on Windows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../build_environment/usage_with_mac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Set-up build environment on Mac Os
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../build_environment/usage_with_linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Set-up build environment on Linux
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Coral TPU
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Coral TPU
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tpu/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tpu/using_a_tpu_on_x86_64_linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TPU usage on Linux (x86_64)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tpu/using_a_tpu_on_arm64_linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TPU usage on Linux (ARM64)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tpu/using_a_tpu_on_x86_64_windows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TPU usage on Windows (x86_64)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    ROS2 package
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            ROS2 package
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ros2_build_environment/usage_with_linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Set-up build environment on Linux
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Running the examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Running the examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../face_roi_demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Face Roi Demo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ROS_demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS2 Demo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Implementation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Implementation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/implementation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Library implementation details
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribution rules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmake-integration" class="md-nav__link">
    <span class="md-ellipsis">
      CMake integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CMake integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#targets" class="md-nav__link">
    <span class="md-ellipsis">
      Target(s)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-it-into-your-own-project" class="md-nav__link">
    <span class="md-ellipsis">
      Integrating it into your own project
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="overview">Overview</h1>
<p>The library offers a relatively simple abstraction (compared to the MediaPipe framework) for use with the BlazeFace Mediapipe model. The code is directly built up on the TensorFlow Lite library and uses basic OpenCV functions to preprocess videoframe's and postprocess the results from the model.</p>
<h2 id="api">API</h2>
<p>The library API consists of the following functions:
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm">* @brief Constructor</span>
<span class="cm">* @param det_threshold The sensitivity of the face detector implementation </span>
<span class="cm">* (default=0.75)</span>
<span class="cm">*/</span>
<span class="n">FaceDetector</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">det_threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.75f</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm">* @brief Loads model and initializes the inference runtime</span>
<span class="cm">* @param model_path Path to the Mediapipe Blazeface face detector model (.tflite) file</span>
<span class="cm">* @param delegate_type The delegate to use for inference (CPU or TPU)(default=CPU)</span>
<span class="cm">* @param num_of_threads The number of CPU threads which can be used </span>
<span class="cm">*                       by the inference runtime</span>
<span class="cm">*/</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">load_model</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">model_path</span><span class="p">,</span><span class="w"> </span>
<span class="w">                </span><span class="k">const</span><span class="w"> </span><span class="n">face_detector_delegate</span><span class="w"> </span><span class="n">delegate_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">face_detector_delegate</span><span class="o">::</span><span class="n">CPU</span><span class="p">,</span><span class="w"> </span>
<span class="w">                </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">num_of_threads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Loads image into model and does inference</span>
<span class="cm"> * @param frame Any frame which is formatted in CV_8UC3 or CV_8UC4 format</span>
<span class="cm">*/</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">load_image</span><span class="p">(</span><span class="n">cv</span><span class="o">::</span><span class="n">Mat</span><span class="w"> </span><span class="o">&amp;</span><span class="n">frame</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Gets the Region of Interest, formatted as a square area (scaled to input image) where a detected face might be in</span>
<span class="cm"> * @return Rectangular area which contains a detected face</span>
<span class="cm">*/</span>
<span class="n">cv</span><span class="o">::</span><span class="n">Rect</span><span class="w"> </span><span class="nf">get_face_roi</span><span class="p">();</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Gets the 2D landmarks from the face.</span>
<span class="cm"> * @return Array with 6 Facial landmarks;</span>
<span class="cm"> *         Index 0: Left Eye</span>
<span class="cm"> *         Index 1: Right Eye</span>
<span class="cm"> *         Index 2: Nose</span>
<span class="cm"> *         Index 3: Mouth</span>
<span class="cm"> *         Index 4: Left ear</span>
<span class="cm"> *         Index 5: Right ear</span>
<span class="cm">*/</span>
<span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">cv</span><span class="o">::</span><span class="n">Point</span><span class="p">,</span><span class="w"> </span><span class="n">NUM_OF_FACE_DETECTOR_LANDMARKS</span><span class="o">&gt;</span><span class="w"> </span><span class="n">get_face_landmarks</span><span class="p">();</span>

<span class="cm">/**</span>
<span class="cm"> * @brief Determine whether a face was detected</span>
<span class="cm"> * @return 0 if face was detected, 1 if no face was detected in input frame</span>
<span class="cm">*/</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">detected</span><span class="p">();</span>
</code></pre></div>
The comments above the functions describe fairly well what each function does. Here some additional notes;</p>
<div class="admonition note">
<p class="admonition-title">Detector sensitivity</p>
<p>The constructor has the option to adjust the sensitivity of the face detector. As this option determines the minimum threshold of the region confidence score output of the model, threshold values closer to 0 will result in higher sensitivity, leading to more false positives. Conversely, a value closer to 1 will result in lower sensitivity, leading to more false negatives.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Model path</p>
<p>CMake generates a macro for the CPU and TPU models; As well as the models/ subfolder:</p>
<p><code>CFML_FACE_DETECTOR_CPU_MODEL_PATH</code>: Points to "models/CPU/face_detection.tflite"</p>
<p><code>CFML_FACE_DETECTOR_TPU_MODEL_PATH</code>: Points to "models/TPU/face_detection.tflite"</p>
<p><code>CFML_FACE_DETECTOR_MODEL_DIR</code>: Points to "models/" folder of this library</p>
</div>
<div class="admonition note">
<p class="admonition-title">Number of threads</p>
<p>Number of threads indicate how many CPU threads to use for the inference delegate. </p>
<p><strong>Please note that this can only be used with the CPU delegate!</strong>. When using the TPU delegate, this parameter will be ignored. As adding threads with TPU adds aditional latency as the threads have to wait for synchronisation everytime one thread offloads it's task to the same TPU.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Alignment of Face ROI</p>
<p>Please note that the Face ROI is top-left aligned. </p>
</div>
<h2 id="cmake-integration">CMake integration</h2>
<p>This project uses CMake for generating the build files. The CMakeLists is configured as follows:</p>
<h3 id="targets">Target(s)</h3>
<p>The main target defined in the CMakeLists is the <code>face_detector</code> target. <strong>As this will not be the only library released under the CLFML organisation, we chose to namespace it and call it <code>CLFML::face_detector</code></strong>. </p>
<p>Other targets which are defined in the CMake files of this project are the Unit tests.</p>
<div class="admonition note">
<p class="admonition-title">Unit Tests are not built by default!</p>
<p>Unit tests are not built by default! To build the unit-tests, pass in the <code>-DCLFML_FACE_DETECTOR_BUILD_UNIT_TESTS</code> argument to the CMake generator.</p>
<p>e.g. <code>cmake -B build -DCLFML_FACE_DETECTOR_BUILD_UNIT_TESTS</code></p>
</div>
<h3 id="configuration-options">Configuration options</h3>
<p>Some of the configuration options which can be used to generate the CMake project are:</p>
<ul>
<li>
<p><code>CLFML_FACE_DETECTOR_BUILD_UNIT_TESTS</code>; Build Unit tests (Default=OFF)</p>
</li>
<li>
<p><code>CLFML_FACE_DETECTOR_BUILD_EXAMPLE_PROJECTS</code>; Build example projects (Face roi demo) (Default=ON, *only when project is not part of other project)</p>
</li>
<li>
<p><code>CLFML_FACE_DETECTOR_ENABLE_CORAL_TPU</code>; Enables Coral TPU support (Default=OFF)</p>
</li>
<li>
<p><code>CLFML_ROS2_PACKAGE_BUILD</code>; Build a ROS2 (Default=OFF, *Note that colcon is used as the build system.) </p>
</li>
</ul>
<h3 id="integrating-it-into-your-own-project">Integrating it into your own project</h3>
<p>Here are some CMake snippets which indicate how this project might be included into your own CMake project.</p>
<div class="admonition example">
<p class="admonition-title">Automatically fetching from GitHub</p>
<p>CPU only:
<div class="highlight"><pre><span></span><code><span class="nb">include</span><span class="p">(</span><span class="s">FetchContent</span><span class="p">)</span>

<span class="nb">FetchContent_Declare</span><span class="p">(</span>
<span class="w"> </span><span class="s">Face_Detector.Cpp</span>
<span class="w"> </span><span class="s">GIT_REPOSITORY</span><span class="w"> </span><span class="s">https://github.com/CLFML/Face_Detector.Cpp.git</span>
<span class="w"> </span><span class="s">GIT_TAG</span><span class="w">        </span><span class="s">main</span>
<span class="p">)</span>
<span class="nb">FetchContent_MakeAvailable</span><span class="p">(</span><span class="s">Face_Detector.Cpp</span><span class="p">)</span>

<span class="err">...</span>

<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">YOUR_MAIN_EXECUTABLE_NAME</span><span class="w"> </span><span class="s">CLFML::face_detector</span><span class="p">)</span>
</code></pre></div></p>
<p>TPU and CPU (requires version matched libedgetpu to be installed on your system *):
<div class="highlight"><pre><span></span><code><span class="nb">include</span><span class="p">(</span><span class="s">FetchContent</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CLFML_FACE_DETECTOR_ENABLE_CORAL_TPU</span><span class="w"> </span><span class="s">ON</span><span class="w"> </span><span class="s">CACHE</span><span class="w"> </span><span class="s">INTERNAL</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w">  </span><span class="c"># Makes sure that the lib will build with TPU support</span>

<span class="nb">FetchContent_Declare</span><span class="p">(</span>
<span class="w"> </span><span class="s">Face_Detector.Cpp</span>
<span class="w"> </span><span class="s">GIT_REPOSITORY</span><span class="w"> </span><span class="s">https://github.com/CLFML/Face_Detector.Cpp.git</span>
<span class="w"> </span><span class="s">GIT_TAG</span><span class="w">        </span><span class="s">main</span>
<span class="p">)</span>
<span class="nb">FetchContent_MakeAvailable</span><span class="p">(</span><span class="s">Face_Detector.Cpp</span><span class="p">)</span>

<span class="err">...</span>

<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">YOUR_MAIN_EXECUTABLE_NAME</span><span class="w"> </span><span class="s">CLFML::face_detector</span><span class="p">)</span>
</code></pre></div></p>
<p>*Version matched with the tensorflow used by this lib (currenly 1.16.1)</p>
</div>
<div class="admonition example">
<p class="admonition-title">Manually using add_subdirectory</p>
<p>First make sure that this library is cloned into the project directory!
    CPU only:
<div class="highlight"><pre><span></span><code><span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">Face_Detector.Cpp</span><span class="p">)</span>
<span class="err">...</span>

<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">YOUR_MAIN_EXECUTABLE_NAME</span><span class="w"> </span><span class="s">CLFML::face_detector</span><span class="p">)</span>
</code></pre></div></p>
<p>TPU and CPU (requires version matched libedgetpu to be installed on your system *):
<div class="highlight"><pre><span></span><code><span class="nb">set</span><span class="p">(</span><span class="s">CLFML_FACE_DETECTOR_ENABLE_CORAL_TPU</span><span class="w"> </span><span class="s">ON</span><span class="w"> </span><span class="s">CACHE</span><span class="w"> </span><span class="s">INTERNAL</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="w">  </span><span class="c"># Makes sure that the lib will build with TPU support</span>
<span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">Face_Detector.Cpp</span><span class="p">)</span>
<span class="err">...</span>

<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">YOUR_MAIN_EXECUTABLE_NAME</span><span class="w"> </span><span class="s">CLFML::face_detector</span><span class="p">)</span>
</code></pre></div></p>
<p>*Version matched with the tensorflow used by this lib (currenly 1.16.1)</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../.." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Home
              </div>
            </div>
          </a>
        
        
          
          <a href="../build_environment/usage_with_windows/" class="md-footer__link md-footer__link--next" aria-label="Next: Set-up build environment on Windows">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Set-up build environment on Windows
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5090c770.min.js"></script>
      
    
  </body>
</html>